<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <style>body { font-family: sans-serif; text-align: center; padding: 50px; }</style>
</head>
<body>
    <h1>Bitte Code eingeben</h1>
    <input type="text" id="input" placeholder="Dein Code">
    <button onclick="login()">Login</button>

    <script>
        const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRfMZampo37PdUYahyd8Rg21IGE1oQqfOOArjQjEVcEoGMNN7ZM-7bTrMgtilwn05oO7qEJJ26IKu5x/pub?gid=0&single=true&output=csv"; // HIER EINSETZEN

        async function login() {
            const input = document.getElementById('input').value;
            
            // Eingabe hashen
            const msgUint8 = new TextEncoder().encode(input);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashedInput = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

            try {
                const response = await fetch(CSV_URL);
                const data = await response.text();
                const hashes = data.split(/\r?\n/).map(h => h.trim().replace(/"/g, ""));

                if (hashes.includes(hashedInput)) {
                    window.location.href = "geheim.html"; // Deine Zielseite
                } else {
                    alert("Falscher Code!");
                }
            } catch (e) {
                alert("Fehler beim Laden der Codes.");
            }
        }
    </script>
</body>
</html>
